{
    "properties": {
        "title": "Geoprocessing Sample"
    },
    "load": {
        "bundleLocations": [
            "localbundles",
            "bundles"
        ],
        "allowedBundles": [
            "system",
            "console",
            "notifier",
            "splashscreen",
            "templatelayout",
            "template-seasons",
            "theme-autumn",
            "map-init",
            "map-preload-2D",
            "toolset",
            "banner",
            "mapnavigation",
            "popups-default",
            "scalebar",
            "locateme",
            "parameter-url",
            "search-ui",
            "locator-store",
            "toc",
            "dn_geoprocessing"
        ]
    },
    "bundles": {
        "dn_geoprocessing": {
            "GeoprocessingTools": [
                {
                    "id": "gp_printing",
                    "title": "Synchrones Drucken",
                    "tooltip": "Synchrones Drucken",
                    "rules": {
                        "roles": [
                            "maAdmin",
                            "maEditor"
                        ],
                        "ruleSuccessProperty": "enabled"
                    },
                    "url": "https://services.conterra.de/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task",
                    "showWidget": true,
                    "refreshLayerIds": [
                        "libraries",
                        "stoerungen"
                    ],
                    "parameters": [
                        {
                            "name": "Web_Map_as_JSON",
                            "title": "Webmap as JSON",
                            "type": "string",
                            "value": {
                                "mapOptions": {
                                    "extent": {
                                        "spatialReference": {
                                            "wkid": 3857
                                        },
                                        "xmin": 758448.8005249344,
                                        "ymin": 6599379.269071205,
                                        "xmax": 791257.1994750656,
                                        "ymax": 6621974.730928795
                                    },
                                    "spatialReference": {
                                        "wkid": 3857
                                    },
                                    "showAttribution": true,
                                    "scale": 100000
                                },
                                "operationalLayers": [
                                    {
                                        "id": "1843ce5ec22-layer-6",
                                        "title": "Libraries",
                                        "opacity": 1,
                                        "minScale": 0,
                                        "maxScale": 0,
                                        "url": "https://services.arcgis.com/ObdAEOfl1Z5LP2D0/arcgis/rest/services/Köln/FeatureServer/1",
                                        "layerDefinition": {
                                            "definitionExpression": null,
                                            "drawingInfo": {
                                                "renderer": {
                                                    "type": "simple",
                                                    "symbol": {
                                                        "type": "esriPMS",
                                                        "angle": 0,
                                                        "xoffset": 0,
                                                        "yoffset": 0,
                                                        "contentType": "image/png",
                                                        "imageData": "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",
                                                        "url": "https://services.arcgis.com/ObdAEOfl1Z5LP2D0/arcgis/rest/services/Köln/FeatureServer/1/images/52017ede-66ca-454e-b3c8-a59beed1a8fe",
                                                        "height": 18,
                                                        "width": 18
                                                    }
                                                }
                                            }
                                        },
                                        "showLabels": true
                                    }
                                ],
                                "baseMap": {
                                    "title": "Basemap",
                                    "baseMapLayers": [
                                        {
                                            "url": "https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"
                                        }
                                    ]
                                },
                                "exportOptions": {
                                    "dpi": 150
                                },
                                "layoutOptions": {
                                    "titleText": "Testdruck",
                                    "authorText": "Testdruck Autor",
                                    "copyrightText": "Testdruck Copyright",
                                    "customTextElements": [
                                        {
                                            "email": "${mail}"
                                        },
                                        {
                                            "city": "${city}"
                                        },
                                        {
                                            "country": "${country}"
                                        },
                                        {
                                            "phonenumber": "${phonenumber}"
                                        },
                                        {
                                            "sn": "${sn}"
                                        },
                                        {
                                            "street": "${street}"
                                        },
                                        {
                                            "testString": "testString"
                                        },
                                        {
                                            "date": "11/3/2022"
                                        }
                                    ],
                                    "scaleBarOptions": {},
                                    "legendOptions": {
                                        "operationalLayers": [
                                            {
                                                "id": "1843ce5ec22-layer-6"
                                            }
                                        ]
                                    }
                                }
                            },
                            "editable": false,
                            "required": true
                        },
                        {
                            "name": "Format",
                            "title": "Format",
                            "type": "string",
                            "value": "PDF",
                            "choiceList": [
                                "PDF",
                                "PNG32",
                                "PNG8",
                                "JPG",
                                "GIF",
                                "EPS",
                                "SVG",
                                "SVGZ",
                                "AIX",
                                "TIFF"
                            ],
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "Layout_Template",
                            "title": "Layout",
                            "type": "string",
                            "value": "A4 Landscape",
                            "choiceList": [
                                "A3 Landscape",
                                "A3 Portrait",
                                "A4 Landscape",
                                "A4 Portrait",
                                "Letter ANSI A Landscape",
                                "Letter ANSI A Portrait",
                                "Tabloid ANSI B Landscape",
                                "Tabloid ANSI B Portrait",
                                "MAP_ONLY"
                            ],
                            "editable": true,
                            "required": true
                        }
                    ]
                },
                {
                    "id": "gp_viewshed",
                    "title": "Berechnung eines Viewshed",
                    "tooltip": "Berechnung eines Viewshed",
                    "url": "https://sampleserver6.arcgisonline.com/arcgis/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed",
                    "showWidget": true,
                    "parameters": [
                        {
                            "name": "Input_Observation_Point",
                            "title": "Beobachtungspunkt",
                            "type": "feature-record-set-layer",
                            "value": {
                                "features": [
                                    {
                                        "aggregateGeometries": null,
                                        "geometry": {
                                            "spatialReference": {
                                                "wkid": 4326
                                            },
                                            "x": 7.590545246530715,
                                            "y": 46.124155905696604
                                        },
                                        "symbol": {
                                            "type": "esriSMS",
                                            "color": [
                                                255,
                                                0,
                                                0,
                                                255
                                            ],
                                            "angle": 0,
                                            "xoffset": 0,
                                            "yoffset": 0,
                                            "size": 12,
                                            "style": "esriSMSCircle",
                                            "outline": {
                                                "type": "esriSLS",
                                                "color": [
                                                    255,
                                                    255,
                                                    255,
                                                    255
                                                ],
                                                "width": 2,
                                                "style": "esriSLSSolid"
                                            }
                                        },
                                        "attributes": {},
                                        "popupTemplate": null
                                    }
                                ]
                            },
                            "required": true
                        },
                        {
                            "name": "",
                            "type": "linear-unit",
                            "value": 5000,
                            "required": true
                        }
                    ]
                },
                {
                    "id": "gp_toolset_dev",
                    "title": "Entwicklungsbeispiel",
                    "tooltip": "Entwicklungsbeispiel",
                    "rules": {
                        "roles": [
                            "maAdmin",
                            "maEditor"
                        ],
                        "ruleSuccessProperty": "enabled"
                    },
                    "url": "https://services.conterra.de/test",
                    "showWidget": true,
                    "parameters": [
                        {
                            "name": "boolean",
                            "title": "Boolean",
                            "type": "boolean",
                            "value": true,
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "string",
                            "title": "String",
                            "type": "string",
                            "value": "Haus",
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "string_choicelist",
                            "title": "String Auswahlliste",
                            "type": "string",
                            "value": "Apfel",
                            "choiceList": [
                                "Apfel",
                                "Birne",
                                "Traube"
                            ],
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "sampleLong",
                            "title": "Long",
                            "type": "long",
                            "value": 1337,
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "sampleLongWithRange",
                            "title": "Long mit Wertebereich",
                            "type": "long",
                            "value": 5,
                            "range": {
                                "min": 0,
                                "max": 10
                            },
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "sampleDouble",
                            "title": "Double",
                            "type": "double",
                            "value": 3.14,
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "sampleDoubleWithRange",
                            "title": "Double mit Wertebereich",
                            "type": "double",
                            "value": 3.14,
                            "range": {
                                "min": 1.5,
                                "max": 15.5
                            },
                            "editable": true,
                            "required": true
                        },
                        {
                            "name": "uneditable",
                            "title": "Nicht editierbar",
                            "type": "double",
                            "value": 5,
                            "editable": false
                        }
                    ]
                }
            ],
            "Config": {
                "supportEmailAddress": "support@conterra.de"
            }
        },
        "banner": {
            "BannerWidget": {
                "label": "Developer Network",
                "image": "resource('${app}:/images/logo_conterra.png')",
                "imageWidth": 200,
                "imagePosition": "above",
                "link": "http://developernetwork.conterra.de"
            }
        },
        "map-init": {
            "Config": {
                "basemaps": [
                    {
                        "id": "esri_street",
                        "title": "Straßenkarte (grau)",
                        "thumbnailUrl": "resource('${app}:/images/streets.png')",
                        "selected": true,
                        "basemap": "gray"
                    },
                    {
                        "id": "esri_hybrid",
                        "title": "Luftbild (hybrid)",
                        "thumbnailUrl": "resource('${app}:/images/hybrid.png')",
                        "basemap": "hybrid"
                    }
                ],
                "map": {
                    "layers": [
                        {
                            "id": "stoerungen",
                            "title": "Störungen",
                            "type": "AGS_DYNAMIC",
                            "url": "https://services.conterra.de/arcgis/rest/services/mapapps/stoerung/MapServer"
                        },
                        {
                            "id": "libraries",
                            "title": "Bibliotheken",
                            "url": "https://services.arcgis.com/ObdAEOfl1Z5LP2D0/arcgis/rest/services/Köln/FeatureServer/1",
                            "type": "AGS_FEATURE",
                            "visible": true,
                            "maptipTemplate": {
                                "content": "{NAME_LANG}"
                            },
                            "popupTemplate": {
                                "title": "{NAME_LANG}",
                                "content": [
                                    {
                                        "type": "fields",
                                        "fieldInfos": [
                                            {
                                                "fieldName": "NAME_LANG",
                                                "label": "${common.name}"
                                            },
                                            {
                                                "fieldName": "ADRESSE",
                                                "label": "${common.address}"
                                            },
                                            {
                                                "fieldName": "PLZ",
                                                "label": "${common.zip}"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                },
                "view": {
                    "viewmode": "2D",
                    "center": {
                        "x": 774853,
                        "y": 6610677,
                        "spatialReference": 3857
                    },
                    "scale": 140000
                }
            }
        },
        "toc": {
            "Config": {
                "showBasemaps": true,
                "showLayerLegend": true
            }
        },
        "toolset": {
            "ToolsetManager": {
                "toolsets": [
                    {
                        "id": "mapview_tools",
                        "tools": [
                            "locateMeTool",
                            "zoomInTool",
                            "zoomOutTool",
                            "compassTool",
                            "restoreInitialViewTool",
                            "viewmodeSwitcherTool"
                        ],
                        "registerWidget": {
                            "widgetRole": "mapview_tools"
                        },
                        "container": "ignore",
                        "windowType": "container",
                        "cssClass": "muted",
                        "tooltipPositions": [
                            "before",
                            "above",
                            "below",
                            "after"
                        ]
                    },
                    {
                        "id": "drawer_left",
                        "title": "Werkzeuge",
                        "cssClass": "ct-main-app-menu",
                        "tools": [
                            "tocToggleTool"
                        ],
                        "registerWidget": {
                            "widgetRole": "drawer_button"
                        },
                        "container": "ignore",
                        "windowType": "drawer_left",
                        "tooltipPositions": [
                            "after",
                            "above",
                            "below",
                            "before"
                        ]
                    },
                    {
                        "id": "ctwdyw",
                        "cssClass": "ctWDYWBtn ctPrimaryInput",
                        "title": "Geoprocessing Tools",
                        "tools": [
                            "gp_*"
                        ],
                        "container": "map",
                        "position": {
                            "rel_t": 90,
                            "rel_l": 15
                        },
                        "windowType": "dropdown"
                    }
                ]
            }
        }
    }
}
